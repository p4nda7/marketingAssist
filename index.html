<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Produkt Management System</title>
    <style>
        :root {
            --primary-color: #FF69B4;       /* Pink */
            --secondary-color: #FFB6C1;     /* Helles Pink */
            --accent-color: #DDA0DD;        /* Plum */
            --background-color: #FFF0F5;    /* Lavender Blush */
            --card-color: #FFFFFF;          /* Wei√ü */
            --shadow-color: rgba(255,105,180,0.2);
        }

        body {
            font-family: 'Quicksand', Arial, sans-serif;
            margin: 20px;
            background-color: var(--background-color);
            background-image: 
                radial-gradient(circle at 10% 20%, rgba(255,182,193,0.1) 0%, transparent 20%),
                radial-gradient(circle at 90% 60%, rgba(221,160,221,0.1) 0%, transparent 20%);
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            width: 95%;
        }

        .product-form, .category-section {
            background-color: var(--card-color);
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 10px 20px var(--shadow-color);
            margin-bottom: 30px;
            border: 3px solid var(--secondary-color);
            transition: transform 0.3s ease;
        }

        .product-form:hover, .category-section:hover {
            transform: translateY(-5px);
        }

        .category-header {
            color: var(--primary-color);
            font-size: 1.5em;
            margin: 0 0 20px 0;
            padding: 10px 20px;
            background-color: var(--background-color);
            border-radius: 15px;
            text-align: center;
            border: 2px dashed var(--secondary-color);
        }

        .ad-preview {
            background-color: var(--background-color);
            padding: 20px;
            border-radius: 15px;
            margin-top: 15px;
            border: 2px solid var(--secondary-color);
            transition: all 0.3s ease;
        }

        .ad-preview:hover {
            transform: scale(1.02);
            box-shadow: 0 5px 15px var(--shadow-color);
        }

        button {
            background-color: var(--primary-color);
            color: white;
            padding: 12px 25px;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1em;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
            box-shadow: 0 4px 8px var(--shadow-color);
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px var(--shadow-color);
            background-color: var(--accent-color);
        }

        button:active {
            transform: translateY(1px);
        }

        .global-actions {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 30px;
            padding: 20px;
            background-color: var(--card-color);
            border-radius: 20px;
            box-shadow: 0 5px 15px var(--shadow-color);
        }

        .global-actions button {
            min-width: 200px;
        }

        /* Anpassungen f√ºr die Produktkarten */
        .product-card {
            cursor: pointer;
            transition: all 0.3s ease;
            background-color: var(--card-color);
            border-radius: 15px;
            padding: 25px;
            margin: 15px;
            box-shadow: 0 5px 15px var(--shadow-color);
            position: relative;
            border: 2px solid transparent;
            overflow: hidden;
        }

        .product-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 5px;
            background: linear-gradient(to right, var(--primary-color), var(--accent-color));
        }

        .product-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px var(--shadow-color);
            border-color: var(--secondary-color);
        }

        .product-card .ad-preview {
            background-color: rgba(255, 240, 245, 0.7);
            padding: 20px;
            margin: 15px -25px -25px -25px;
            border-top: 2px dashed var(--secondary-color);
            position: relative;
        }

        .product-card .ad-preview::before {
            content: '‚ú®';
            position: absolute;
            top: -12px;
            left: 50%;
            transform: translateX(-50%);
            background-color: var(--card-color);
            padding: 0 10px;
            font-size: 1.2em;
        }

        .product-card h3 {
            color: var(--primary-color);
            margin-bottom: 15px;
            font-size: 1.4em;
            border-bottom: 2px solid var(--secondary-color);
            padding-bottom: 10px;
            text-align: center;
        }

        .product-card.selected {
            border: 3px solid var(--primary-color);
            transform: scale(1.02);
            box-shadow: 0 8px 30px var(--shadow-color);
        }

        .category-products {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 25px;
            padding: 20px;
        }

        /* Verbesserte Abst√§nde und Lesbarkeit */
        .product-card p {
            line-height: 1.6;
            margin: 12px 0;
            color: #555;
        }

        .product-card img {
            display: block;
            margin: 15px auto;
            border-radius: 10px;
            box-shadow: 0 3px 10px var(--shadow-color);
        }

        .category-badge {
            display: inline-block;
            padding: 6px 15px;
            background-color: var(--accent-color);
            color: white;
            border-radius: 20px;
            font-size: 0.9em;
            margin: 10px 0;
            box-shadow: 0 2px 5px var(--shadow-color);
        }

        /* Anpassungen f√ºr den Bearbeitungsmodus */
        .product-card .edit-form {
            background-color: var(--background-color);
            padding: 20px;
            border-radius: 15px;
            margin: -25px;
            border: 2px solid var(--secondary-color);
        }

        /* Animationen f√ºr Interaktionen */
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .pulse {
            animation: pulse 0.5s ease;
        }

        /* Responsive Grid f√ºr Produktkarten */
        .products-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 35px;
            padding: 25px;
            margin: 0 auto;
        }

        /* Responsive Formular */
        .form-group {
            margin-bottom: 20px;
        }

        input, textarea, select {
            width: 100%;
            padding: 12px;
            border: 2px solid var(--secondary-color);
            border-radius: 15px;
            font-size: 16px; /* Bessere Lesbarkeit auf mobilen Ger√§ten */
        }

        /* Responsive Buttons */
        .global-actions {
            flex-wrap: wrap;
            padding: 15px;
        }

        .global-actions button {
            flex: 1;
            min-width: 200px;
            margin: 5px;
            white-space: nowrap;
        }

        /* Responsive Produktkarten */
        .product-card {
            width: 100%;
            margin: 10px 0;
        }

        /* Responsive Text */
        h1 {
            font-size: clamp(24px, 4vw, 36px);
            text-align: center;
            margin-bottom: 30px;
        }

        h2 {
            font-size: clamp(20px, 3vw, 28px);
        }

        /* Modal Anpassungen */
        .modal-content {
            width: 90%;
            max-width: 500px;
            margin: 20px auto;
            padding: 20px;
        }

        /* Media Queries */
        @media (max-width: 1200px) {
            .products-grid {
                gap: 30px;
                padding: 20px;
            }
        }

        @media (max-width: 768px) {
            .products-grid {
                grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
                gap: 25px;
                padding: 15px;
            }

            .product-card {
                margin-bottom: 25px;
            }

            .category-section {
                margin-bottom: 40px;
                padding-bottom: 30px;
            }
        }

        @media (max-width: 480px) {
            .products-grid {
                grid-template-columns: 1fr;
                gap: 20px;
                padding: 10px;
            }

            .product-card {
                margin-bottom: 20px;
            }

            .category-section {
                margin-bottom: 30px;
                padding-bottom: 25px;
            }
        }

        /* Verbesserte Touch-Interaktion */
        @media (hover: none) {
            button:hover {
                transform: none;
            }

            .product-card:hover {
                transform: none;
            }

            .product-card:active {
                transform: scale(0.98);
            }
        }

        /* Druckanpassungen */
        @media print {
            .product-form, .global-actions {
                display: none;
            }

            .product-card {
                break-inside: avoid;
                box-shadow: none;
                border: 1px solid #ddd;
            }
        }

        /* Neues Grid-Layout f√ºr alle Produktkarten */
        .products-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 20px;
            padding: 10px;
        }

        .product-card {
            background-color: var(--card-color);
            border-radius: 12px;
            padding: 15px;
            box-shadow: 0 3px 10px var(--shadow-color);
            position: relative;
            border: 2px solid transparent;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .product-card h3 {
            font-size: 1.2em;
            margin: 0;
            padding: 10px 0;
            text-align: center;
            color: var(--primary-color);
        }

        .category-badge {
            align-self: center;
            padding: 5px 12px;
            font-size: 0.9em;
            background-color: var(--accent-color);
            color: white;
            border-radius: 15px;
            margin: 5px 0;
        }

        .product-card img {
            max-width: 100%;
            height: auto;
            border-radius: 8px;
            margin: 10px 0;
        }

        .product-card .ad-preview {
            background-color: rgba(255, 240, 245, 0.8);
            padding: 15px;
            margin: 10px -15px -15px -15px;
            border-top: 2px dashed var(--secondary-color);
        }

        .product-card .ad-preview h4 {
            margin: 0 0 10px 0;
            font-size: 1em;
            text-align: center;
        }

        /* Bearbeitungsformular f√ºr Mobile */
        .edit-form {
            padding: 15px;
            background-color: var(--background-color);
            border-radius: 10px;
            margin: 10px -15px;
        }

        .edit-form .form-group {
            margin-bottom: 12px;
        }

        .edit-form label {
            font-size: 0.9em;
            margin-bottom: 5px;
        }

        .edit-form input,
        .edit-form textarea,
        .edit-form select {
            padding: 8px;
            font-size: 1em;
        }

        /* Globale Aktionen f√ºr Mobile */
        .global-actions {
            display: flex;
            flex-direction: column;
            gap: 10px;
            padding: 15px;
            margin-bottom: 20px;
        }

        .global-actions button {
            width: 100%;
            padding: 12px;
            font-size: 1em;
        }

        /* Responsive Breakpoints */
        @media (min-width: 600px) {
            .products-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 20px;
                padding: 20px;
            }

            .global-actions {
                flex-direction: row;
                justify-content: center;
            }

            .global-actions button {
                width: auto;
                min-width: 200px;
            }
        }

        @media (min-width: 900px) {
            .products-grid {
                grid-template-columns: repeat(3, 1fr);
                gap: 25px;
                padding: 25px;
            }

            .product-card {
                padding: 20px;
            }

            .product-card .ad-preview {
                margin: 15px -20px -20px -20px;
                padding: 20px;
            }
        }

        @media (min-width: 1200px) {
            .products-grid {
                grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
                gap: 25px;
                padding: 30px;
            }

            .product-card {
                padding: 25px;
            }

            .product-card .ad-preview {
                margin: 20px -25px -25px -25px;
                padding: 25px;
            }
        }

        /* Touch-Optimierungen */
        @media (hover: none) {
            .product-card {
                cursor: default;
            }

            button {
                padding: 15px 25px; /* Gr√∂√üere Touch-Targets */
            }

            input, select, textarea {
                font-size: 16px; /* Verhindert Zoom auf iOS */
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Produkt Management System</h1>
        
        <div class="product-form">
            <h2>Neues Produkt hinzuf√ºgen</h2>
            <div class="form-group">
                <button type="button" onclick="showCategoryManager()" style="float: right; background-color: #6c757d;">
                    Kategorien verwalten
                </button>
            </div>
            <form id="productForm">
                <div class="form-group">
                    <label for="productName">Produktname:</label>
                    <input type="text" id="productName" required>
                </div>
                
                <div class="form-group">
                    <label for="productCategory">Kategorie:</label>
                    <select id="productCategory" required>
                        <option value="">Bitte w√§hlen...</option>
                        <option value="elektronik">Elektronik</option>
                        <option value="kleidung">Kleidung</option>
                        <option value="haushalt">Haushalt</option>
                        <option value="sport">Sport & Freizeit</option>
                        <option value="beauty">Beauty & Gesundheit</option>
                        <option value="lebensmittel">Lebensmittel</option>
                        <option value="sonstiges">Sonstiges</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="productDescription">Produktbeschreibung:</label>
                    <textarea id="productDescription" rows="4" required></textarea>
                </div>
                
                <div class="form-group">
                    <label for="productImage">Produktbild URL:</label>
                    <input type="url" id="productImage">
                </div>
                
                <div class="form-group">
                    <label for="adTemplate">Werbetext-Vorlage:</label>
                    <textarea id="adTemplate" rows="4">üî• SUPER ANGEBOT! üî•

{name} jetzt f√ºr nur {price}‚Ç¨!
{description}

Greifen Sie schnell zu! üõçÔ∏è</textarea>
                    <small style="color: #666; display: block; margin-top: 5px;">
                        Verf√ºgbare Variablen: {name}, {price}, {description}
                    </small>
                </div>
                
                <button type="submit">Produkt hinzuf√ºgen</button>
            </form>
        </div>
        
        <div class="product-list">
            <h2>Produktliste</h2>
            <div class="global-actions" style="margin-bottom: 20px; text-align: center;">
                <button class="edit-btn" onclick="showGlobalEditMode()">Alle Bearbeiten</button>
                <button class="delete-btn" onclick="showGlobalDeleteMode()">Auswahl L√∂schen</button>
            </div>
            <div id="productsList"></div>
        </div>
    </div>

    <!-- Neuer Dialog f√ºr Kategorie-Verwaltung -->
    <div id="categoryManager" style="display: none;" class="modal">
        <div class="modal-content">
            <h3>Kategorien verwalten</h3>
            <div class="form-group">
                <label for="newCategory">Neue Kategorie:</label>
                <div style="display: flex; gap: 10px;">
                    <input type="text" id="newCategoryId" placeholder="ID (z.B. elektronik)" style="width: 150px;">
                    <input type="text" id="newCategoryLabel" placeholder="Name (z.B. Elektronik)" style="flex-grow: 1;">
                    <button onclick="addCategory()">Hinzuf√ºgen</button>
                </div>
            </div>
            <div id="categoryList" class="category-list">
                <!-- Kategorien werden hier dynamisch eingef√ºgt -->
            </div>
            <button onclick="closeCategoryManager()" style="margin-top: 20px;">Schlie√üen</button>
        </div>
    </div>

    <script>
        let products = [];
        let categories = {
            'elektronik': 'Elektronik',
            'kleidung': 'Kleidung',
            'haushalt': 'Haushalt',
            'sport': 'Sport & Freizeit',
            'beauty': 'Beauty & Gesundheit',
            'lebensmittel': 'Lebensmittel',
            'sonstiges': 'Sonstiges'
        };
        
        let isEditMode = false;
        let isDeleteMode = false;
        let selectedProducts = new Set();
        
        // Lade gespeicherte Produkte beim Start
        function loadProducts() {
            const savedProducts = localStorage.getItem('products');
            if (savedProducts) {
                products = JSON.parse(savedProducts);
                renderProducts();
            }
        }
        
        // Speichere Produkte im Local Storage
        function saveProducts() {
            localStorage.setItem('products', JSON.stringify(products));
        }
        
        document.getElementById('productForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const product = {
                id: Date.now(),
                name: document.getElementById('productName').value,
                category: document.getElementById('productCategory').value,
                description: document.getElementById('productDescription').value,
                image: document.getElementById('productImage').value,
                adTemplate: document.getElementById('adTemplate').value
            };
            
            addProduct(product);
            
            document.getElementById('productName').value = '';
            document.getElementById('productCategory').value = '';
            document.getElementById('productDescription').value = '';
            document.getElementById('productImage').value = '';
        });

        function renderProducts() {
            const productsList = document.getElementById('productsList');
            productsList.innerHTML = '';
            
            // Gruppiere Produkte nach Kategorien
            const groupedProducts = {};
            products.forEach(product => {
                const category = product.category;
                if (!groupedProducts[category]) {
                    groupedProducts[category] = [];
                }
                groupedProducts[category].push(product);
            });

            // Sortiere Kategorien alphabetisch
            const sortedCategories = Object.keys(groupedProducts).sort((a, b) => {
                return getCategoryLabel(a).localeCompare(getCategoryLabel(b));
            });

            // Erstelle f√ºr jede Kategorie einen eigenen Container
            sortedCategories.forEach(category => {
                const categorySection = document.createElement('div');
                categorySection.className = 'category-section';
                
                categorySection.innerHTML = `
                    <h2 class="category-header">${getCategoryLabel(category)}</h2>
                    <div class="products-grid" id="category-${category}"></div>
                `;
                
                productsList.appendChild(categorySection);
                
                // F√ºge Produkte zur jeweiligen Kategorie hinzu
                const categoryGrid = document.getElementById(`category-${category}`);
                groupedProducts[category].forEach(product => {
                    const productCard = createProductCard(product);
                    categoryGrid.appendChild(productCard);
                });
            });
        }

        function createProductCard(product) {
            const productCard = document.createElement('div');
            productCard.className = 'product-card';
            productCard.id = `product-${product.id}`;
            
            if (isDeleteMode) {
                productCard.style.cursor = 'pointer';
                productCard.onclick = () => toggleProductSelection(product.id);
            }
            
            const adText = generateAdText(product);
            
            if (isEditMode) {
                productCard.innerHTML = `
                    <div class="edit-form" style="display: block;">
                        <h4>Produkt bearbeiten</h4>
                        <div class="form-group">
                            <label>Produktname:</label>
                            <input type="text" class="edit-name" value="${product.name}">
                        </div>
                        <div class="form-group">
                            <label>Kategorie:</label>
                            <select class="edit-category">
                                <option value="elektronik" ${product.category === 'elektronik' ? 'selected' : ''}>Elektronik</option>
                                <option value="kleidung" ${product.category === 'kleidung' ? 'selected' : ''}>Kleidung</option>
                                <option value="haushalt" ${product.category === 'haushalt' ? 'selected' : ''}>Haushalt</option>
                                <option value="sport" ${product.category === 'sport' ? 'selected' : ''}>Sport & Freizeit</option>
                                <option value="beauty" ${product.category === 'beauty' ? 'selected' : ''}>Beauty & Gesundheit</option>
                                <option value="lebensmittel" ${product.category === 'lebensmittel' ? 'selected' : ''}>Lebensmittel</option>
                                <option value="sonstiges" ${product.category === 'sonstiges' ? 'selected' : ''}>Sonstiges</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Produktbeschreibung:</label>
                            <textarea class="edit-description" rows="4">${product.description}</textarea>
                        </div>
                        <div class="form-group">
                            <label>Produktbild URL:</label>
                            <input type="url" class="edit-image" value="${product.image}">
                        </div>
                        <div class="form-group">
                            <label>Werbetext-Vorlage:</label>
                            <textarea class="edit-adTemplate" rows="4">${product.adTemplate || document.getElementById('adTemplate').value}</textarea>
                            <small style="color: #666; display: block; margin-top: 5px;">
                                Verf√ºgbare Variablen: {name}, {description}
                            </small>
                        </div>
                        <button onclick="saveEdit(${product.id})">Speichern</button>
                        <button onclick="cancelEdit(${product.id})">Abbrechen</button>
                    </div>
                `;
            } else {
                productCard.innerHTML = `
                    <div class="product-content">
                        <h3>${product.name}</h3>
                        <span class="category-badge">${getCategoryLabel(product.category)}</span>
                        <p>${product.description}</p>
                        ${product.image ? `<img src="${product.image}" alt="${product.name}" style="max-width: 200px;">` : ''}
                        <div class="ad-preview">
                            <h4>Werbevorschau:</h4>
                            <p>${adText}</p>
                        </div>
                    </div>
                `;
            }
            
            return productCard;
        }

        function addProduct(product) {
            products.push(product);
            saveProducts(); // Speichern nach Hinzuf√ºgen
            renderProducts();
        }

        function showEditForm(productId) {
            document.getElementById(`edit-form-${productId}`).style.display = 'block';
        }

        function cancelEdit(productId) {
            document.getElementById(`edit-form-${productId}`).style.display = 'none';
        }

        function saveEdit(productId) {
            const productCard = document.getElementById(`product-${productId}`);
            const product = products.find(p => p.id === productId);
            
            product.name = productCard.querySelector('.edit-name').value;
            product.category = productCard.querySelector('.edit-category').value;
            product.description = productCard.querySelector('.edit-description').value;
            product.image = productCard.querySelector('.edit-image').value;
            product.adTemplate = productCard.querySelector('.edit-adTemplate').value;
            
            saveProducts();
            renderProducts();
            cancelEdit(productId);
        }

        function deleteProduct() {
            if (selectedProducts.size === 0) {
                alert('Bitte w√§hlen Sie mindestens ein Produkt zum L√∂schen aus.');
                return;
            }
            
            if (confirm(`M√∂chten Sie ${selectedProducts.size} Produkt(e) wirklich l√∂schen?`)) {
                products = products.filter(p => !selectedProducts.has(p.id));
                saveProducts();
                selectedProducts.clear();
                isDeleteMode = false; // Beende den L√∂schmodus
                
                // Aktualisiere die Ansicht
                const deleteBtn = document.querySelector('.global-actions .delete-btn');
                deleteBtn.textContent = 'Auswahl L√∂schen';
                deleteBtn.style.backgroundColor = '#dc3545';
                deleteBtn.onclick = showGlobalDeleteMode;
                
                document.querySelector('.global-actions .edit-btn').style.display = 'inline-block';
                
                renderProducts();
            }
        }

        function generateAdText(product) {
            let template = product.adTemplate || document.getElementById('adTemplate').value;
            
            return template
                .replace(/{name}/g, product.name)
                .replace(/{description}/g, product.description);
        }

        function getCategoryLabel(category) {
            return categories[category] || category;
        }

        function showGlobalEditMode() {
            isEditMode = !isEditMode;
            isDeleteMode = false;
            selectedProducts.clear();
            const editBtn = document.querySelector('.global-actions .edit-btn');
            editBtn.textContent = isEditMode ? 'Bearbeiten beenden' : 'Alle Bearbeiten';
            editBtn.style.backgroundColor = isEditMode ? '#6c757d' : '#28a745';
            document.querySelector('.global-actions .delete-btn').style.display = isEditMode ? 'none' : 'inline-block';
            renderProducts();
        }

        function showGlobalDeleteMode() {
            isDeleteMode = !isDeleteMode;
            isEditMode = false;
            selectedProducts.clear();
            
            const deleteBtn = document.querySelector('.global-actions .delete-btn');
            deleteBtn.textContent = isDeleteMode ? 'Auswahl l√∂schen' : 'Auswahl L√∂schen';
            deleteBtn.style.backgroundColor = isDeleteMode ? '#dc3545' : '#dc3545';
            deleteBtn.onclick = isDeleteMode ? deleteProduct : showGlobalDeleteMode;
            
            document.querySelector('.global-actions .edit-btn').style.display = isDeleteMode ? 'none' : 'inline-block';
            
            renderProducts();
        }

        function toggleProductSelection(productId) {
            if (!isDeleteMode) return; // Nur im L√∂schmodus aktiv
            
            const card = document.getElementById(`product-${productId}`);
            productId = Number(productId); // Konvertiere zu Number f√ºr korrekten Vergleich
            
            if (selectedProducts.has(productId)) {
                selectedProducts.delete(productId);
                card.classList.remove('selected');
            } else {
                selectedProducts.add(productId);
                card.classList.add('selected');
            }
        }

        // Lade die Produkte beim Start der Anwendung
        loadProducts();

        // Lade Kategorien beim Start
        function loadCategories() {
            const savedCategories = localStorage.getItem('categories');
            if (savedCategories) {
                categories = JSON.parse(savedCategories);
            }
            updateCategorySelects();
        }

        // Speichere Kategorien
        function saveCategories() {
            localStorage.setItem('categories', JSON.stringify(categories));
            updateCategorySelects();
        }

        function showCategoryManager() {
            document.getElementById('categoryManager').style.display = 'block';
            renderCategoryList();
        }

        function closeCategoryManager() {
            document.getElementById('categoryManager').style.display = 'none';
        }

        function renderCategoryList() {
            const categoryList = document.getElementById('categoryList');
            categoryList.innerHTML = '';
            
            Object.entries(categories).forEach(([id, label]) => {
                const div = document.createElement('div');
                div.className = 'category-item';
                div.innerHTML = `
                    <span>${label} (${id})</span>
                    <div>
                        <button onclick="editCategory('${id}')" class="edit-btn">Bearbeiten</button>
                        <button onclick="deleteCategory('${id}')" class="delete-btn">L√∂schen</button>
                    </div>
                `;
                categoryList.appendChild(div);
            });
        }

        function addCategory() {
            const id = document.getElementById('newCategoryId').value.toLowerCase();
            const label = document.getElementById('newCategoryLabel').value;
            
            if (id && label) {
                categories[id] = label;
                saveCategories();
                renderCategoryList();
                document.getElementById('newCategoryId').value = '';
                document.getElementById('newCategoryLabel').value = '';
            }
        }

        function editCategory(id) {
            const currentLabel = categories[id];
            
            // Erstelle ein Modal f√ºr die Bearbeitung
            const editModal = document.createElement('div');
            editModal.className = 'modal';
            editModal.style.display = 'block';
            
            editModal.innerHTML = `
                <div class="modal-content">
                    <h3>Kategorie bearbeiten</h3>
                    <div class="form-group">
                        <label>Kategorie ID:</label>
                        <input type="text" id="editCategoryId" value="${id}" placeholder="z.B. elektronik">
                    </div>
                    <div class="form-group">
                        <label>Kategorie Name:</label>
                        <input type="text" id="editCategoryLabel" value="${currentLabel}" placeholder="z.B. Elektronik">
                    </div>
                    <div style="display: flex; gap: 10px; justify-content: flex-end;">
                        <button onclick="saveEditCategory('${id}')" style="background-color: #28a745;">Speichern</button>
                        <button onclick="closeEditModal()" style="background-color: #6c757d;">Abbrechen</button>
                    </div>
                </div>
            `;
            
            document.body.appendChild(editModal);
        }

        function closeEditModal() {
            const modal = document.querySelector('.modal');
            if (modal) {
                modal.remove();
            }
        }

        function saveEditCategory(oldId) {
            const newId = document.getElementById('editCategoryId').value.toLowerCase();
            const newLabel = document.getElementById('editCategoryLabel').value;
            
            if (newId && newLabel) {
                // L√∂sche alte Kategorie
                delete categories[oldId];
                // F√ºge neue Kategorie hinzu
                categories[newId] = newLabel;
                
                // Aktualisiere Produkte mit der alten Kategorie-ID
                products.forEach(product => {
                    if (product.category === oldId) {
                        product.category = newId;
                    }
                });
                
                saveCategories();
                saveProducts();
                renderCategoryList();
                closeEditModal();
            } else {
                alert('Bitte f√ºllen Sie beide Felder aus.');
            }
        }

        function deleteCategory(id) {
            if (confirm(`M√∂chten Sie die Kategorie "${categories[id]}" wirklich l√∂schen?`)) {
                delete categories[id];
                saveCategories();
                renderCategoryList();
            }
        }

        function updateCategorySelects() {
            // Update main form select
            const mainSelect = document.getElementById('productCategory');
            const categoryOptions = Object.entries(categories)
                .map(([id, label]) => `<option value="${id}">${label}</option>`)
                .join('');
            mainSelect.innerHTML = `<option value="">Bitte w√§hlen...</option>${categoryOptions}`;
            
            // Update all edit forms
            renderProducts();
        }

        // Lade Kategorien beim Start
        loadCategories();

        // F√ºge Hover-Effekte f√ºr bessere Interaktivit√§t hinzu
        document.addEventListener('DOMContentLoaded', function() {
            const buttons = document.querySelectorAll('button');
            buttons.forEach(button => {
                button.addEventListener('mouseover', () => {
                    button.style.transform = 'translateY(-2px)';
                });
                button.addEventListener('mouseout', () => {
                    button.style.transform = 'translateY(0)';
                });
            });
        });
    </script>
</body>
</html>
